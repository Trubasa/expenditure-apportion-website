webpackJsonp([0],{"2Ia4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),l=a("NYxO"),s=a("mvHQ"),o=a.n(s),r=a("qejG"),c=[];_.forEach(r.a.billType,function(e,t){c.push({label:e,value:t})});var d=function(){return{id:Date.now()+"-"+parseInt(1e4*Math.random()),name:"",price:0,remark:"",type:"me",create_time:(new Date).Format("yyyy-MM-dd HH:mm:ss")}},m={name:"bill-panel",data:function(){return{typeOptions:c,visible:!1,panelMode:"create",form:d()}},computed:n()({modelName:function(){return"create"==this.panelMode?"新建记录":"编辑记录"}},Object(l.b)({billList:function(e){return e.billList}})),methods:{onChange:function(){},show:function(e){e?(this.form=JSON.parse(o()(e)),this.panelMode="edit"):(this.form=d(),this.panelMode="create"),this.visible=!0},handleOk:function(e){var t=this;if(console.log(e),"create"==this.panelMode)this.billList.push(this.form);else{var a=_.findIndex(this.billList,function(e){return e.id==t.form.id});a>-1&&this.$set(this.billList,a,this.form)}this.$store.dispatch("saveBill",this.billList),this.$message.success("create"==this.panelMode?"创建成功":"删除成功"),this.$emit("refresh"),this.visible=!1}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bill-panel"},[a("a-modal",{attrs:{title:e.modelName},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:12},label:"名称"}},[a("a-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("a-form-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:12},label:"类型"}},[a("a-radio-group",{attrs:{options:e.typeOptions,defaultValue:"me"},on:{change:e.onChange},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),e._v(" "),a("a-form-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:12},label:"价格"}},[a("a-input-number",{attrs:{min:1,max:1e5},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),a("a-form-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:12},label:"备注"}},[a("a-textarea",{attrs:{autosize:{minRows:2,maxRows:6}},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1)},staticRenderFns:[]};var u=[{title:"#",dataIndex:"id",scopedSlots:{customRender:"index"},width:50},{title:"名称",dataIndex:"name",width:240},{title:"类型",dataIndex:"type",width:120,scopedSlots:{customRender:"type"}},{title:"金额(元)",dataIndex:"price",width:120},{title:"备注",dataIndex:"remark",width:240},{title:"时间",dataIndex:"create_time",width:120},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:80}],f=[{id:"1",name:"John Brown",type:"me",money:"￥300,000.00",remark:"New York No. 1 Lake Park"}],h={name:"bill-list",components:{BillPanel:a("VU/8")(m,p,!1,function(e){a("bkpH")},"data-v-6998d9c2",null).exports},computed:n()({},Object(l.b)({billList:function(e){return e.billList}})),data:function(){return{data:f,columns:u}},methods:{showCreatePanel:function(){this.$refs.billPanel.show()},edit:function(e){this.$refs.billPanel.show(e)},deleteRow:function(e){var t=_.findIndex(this.billList,function(t){return t.id==e.id});t>-1&&this.billList.splice(t,1),this.$store.dispatch("saveBill",this.billList),this.$message.success("删除成功")}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bill-list"},[a("a-button",{staticClass:"mgb_5",attrs:{type:"primary"},on:{click:e.showCreatePanel}},[e._v("新建记录")]),e._v(" "),a("a-table",{attrs:{columns:e.columns,size:"small",rowKey:function(e){return e.id},dataSource:e.billList,pagination:!1},scopedSlots:e._u([{key:"index",fn:function(t,i,n){return[a("span",[e._v(e._s(n+1))])]}},{key:"type",fn:function(t,i,n){return[a("span",[e._v(e._s(e.$statusCollection.billType[t]))])]}},{key:"operation",fn:function(t,i,n){return[a("a",{on:{click:function(t){return e.edit(i)}}},[e._v("编辑")]),e._v(" "),a("a-popconfirm",{attrs:{title:"确定删除?"},on:{confirm:function(){return e.deleteRow(i)}}},[a("a",{staticStyle:{color:"#ff5549"}},[e._v("删除")])])]}}])}),e._v(" "),a("bill-panel",{ref:"billPanel"})],1)},staticRenderFns:[]};var v=a("VU/8")(h,b,!1,function(e){a("AyES")},"data-v-2b48f5a8",null);t.default=v.exports},AyES:function(e,t){},bkpH:function(e,t){}});
//# sourceMappingURL=0.5e744ca33b17bbe828fa.js.map